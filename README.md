# ğŸ® Concurrent Ticketing Simulator

## 1. í”„ë¡œì íŠ¸ ëª©ì 

ë³¸ í”„ë¡œê·¸ë¨ì€ **ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œì˜ ë™ì‹œì„± ë¬¸ì œì™€ thread-safe ì„¤ê³„ì˜ ì¤‘ìš”ì„±**ì„ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•œ í‹°ì¼“íŒ… ì‹œë®¬ë ˆì´ì…˜ í”„ë¡œê·¸ë¨ì´ë‹¤.

* ë‹¤ìˆ˜ì˜ **Bot Thread**ì™€ **ì‚¬ìš©ì Thread**ê°€ ë™ì‹œì— ì¢Œì„ ìì›ì— ì ‘ê·¼í•˜ëŠ” ìƒí™© êµ¬ì„±
* ë™ê¸°í™” ì—¬ë¶€ì— ë”°ë¥¸ ë°ì´í„° ë¬´ê²°ì„± ì°¨ì´ë¥¼ ì‹¤í—˜ì ìœ¼ë¡œ í™•ì¸ ê°€ëŠ¥
* UIë¥¼ í†µí•´ ì‹¤ì‹œê°„ ì¢Œì„ ìƒíƒœ ë° ëŒ€ê¸°ì—´ í˜„í™©ì„ í™•ì¸ ê°€ëŠ¥

---

## 2. ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤

1. ì‚¬ìš©ìê°€ í”„ë¡œê·¸ë¨ ì‹¤í–‰
2. â€œê²Œì„ ì‹œì‘â€ í´ë¦­ â†’ ëŒ€ê¸°ì—´(Queue) ì§„ì…
3. ë™ì‹œì— ì—¬ëŸ¬ Bot Threadë„ ëŒ€ê¸°ì—´ Queue ì§„ì…
4. **ì„œë²„ ìŠ¤ë ˆë“œ(ServerThread)**ê°€ ì¼ì • ê°„ê²©ìœ¼ë¡œ ëŒ€ê¸°ì—´ì„ ì†Œë¹„
5. ì°¨ë¡€ê°€ ë˜ë©´ ì¢Œì„ ì„ íƒ í™”ë©´(SeatPanel) ì§„ì…
6. Botì€ ëœë¤ ì¢Œì„ ì„ íƒ
7. ì‚¬ìš©ìì™€ Botì´ ë™ì¼ ì¢Œì„ì„ ê³µìœ í•˜ë©° ê²½ìŸ
8. ì¢Œì„ì€ í•œ ë²ˆë§Œ ì˜ˆë§¤ ê°€ëŠ¥ (**thread-safe ì„¤ê³„**)

---

## 3. ë™ì‹œì„± ì²˜ë¦¬

### 3-1. ê³µìœ  ìì›

ë³¸ í”„ë¡œì íŠ¸ì—ì„œ ë™ì‹œì„± ì²˜ë¦¬ë¥¼ ìœ„í•´ ê³ ë ¤í•œ ê³µìœ  ìì›ì€ í¬ê²Œ 3ê°€ì§€ì´ë‹¤:

| ê³µìœ  ìì›                          | ì„¤ëª…                | thread-safe ì²˜ë¦¬ ë°©ì‹                                                                  |
| ------------------------------ | ----------------- | ---------------------------------------------------------------------------------- |
| **TicketQueue**                | ëŒ€ê¸°ì—´ì— ë“¤ì–´ì˜¨ ì‚¬ìš©ì/ë´‡ ìš”ì²­ | `BlockingQueue` ì‚¬ìš© â†’ ìë™ìœ¼ë¡œ ì…ì¶œë ¥ ì‹œ ë™ê¸°í™”, `put()`/`take()` ë©”ì†Œë“œë¡œ producer-consumer íŒ¨í„´ êµ¬í˜„ |
| **SeatManager.remainingSeats** | ë‚¨ì€ ì¢Œì„ ìˆ˜           | AtomicInteger ì‚¬ìš© â†’ ì¢Œì„ ì˜ˆì•½ ì‹œ decrementAndGet()ë¡œ ì›ìì  ê°ì†Œ ì²˜ë¦¬          |
| **Seat(ê°œë³„ ì¢Œì„)**                | ì‹¤ì œ ì¢Œì„ í•˜ë‚˜          | `book()` ë©”ì†Œë“œë¥¼ í†µí•´ ì˜ˆì•½ ì‹œ ë‹¨ì¼ ìŠ¤ë ˆë“œë§Œ ì„±ê³µ ê°€ëŠ¥í•˜ë„ë¡ ì²˜ë¦¬ (ì„ê³„ì˜ì—­ ë³´í˜¸)                                |

### 3-2. ì²˜ë¦¬ ìˆœì„œ

1. **Producer (UserThread/BotThread)** â†’ `TicketQueue.add()`ë¡œ ìš”ì²­ ë“±ë¡
2. **Consumer (ServerThread)** â†’ `TicketQueue.take()`ë¡œ ìš”ì²­ ì†Œë¹„
3. **SeatManager.bookSeat(row, col)** í˜¸ì¶œ

   * ë‚´ë¶€ì ìœ¼ë¡œ **Seat.book()** í˜¸ì¶œ
   * ì˜ˆì•½ ì„±ê³µ ì‹œ `remainingSeats--`
4. UI ì—…ë°ì´íŠ¸ëŠ” **ë¦¬ìŠ¤ë„ˆ(listener)ë¥¼ í†µí•´ Swing EDTì—ì„œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬**

> âœ”ï¸ `BlockingQueue`ì™€ `synchronized`ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•˜ì—¬ **ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ë‹¤ë¥¸ ì¢Œì„ì„ ì˜ˆì•½** ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„

---

## 4. UI êµ¬ì¡° ë° Listener

### 4-1. Swing UI

* **StartPanel** : ê²Œì„ ì‹œì‘ ë²„íŠ¼
* **QueuePanel** : ëŒ€ê¸°ì—´ ìƒíƒœ í‘œì‹œ, ë‚¨ì€ ëŒ€ê¸°ì—´ ìˆ˜
* **SeatPanel** : ì¢Œì„ ê·¸ë¦¬ë“œ, ì¢Œì„ ìƒ‰ìƒìœ¼ë¡œ ìƒíƒœ í‘œì‹œ (ì˜ˆì•½ ê°€ëŠ¥ â†’ ë³´ë¼, ì˜ˆì•½ë¨ â†’ íšŒìƒ‰)
* **StatusPanel** : ì´ ì¢Œì„ ìˆ˜ / ë‚¨ì€ ì¢Œì„ ìˆ˜ / ì˜ˆë§¤ëœ ì¢Œì„ ìˆ˜ í‘œì‹œ

### 4-2. Listener êµ¬ì¡° (Observer Pattern)

* **TicketEventListener** : ì‚¬ìš©ì ì°¨ë¡€ê°€ ë˜ì—ˆì„ ë•Œ ì¢Œì„ í™”ë©´ìœ¼ë¡œ ì „í™˜
* **SeatBookedListener** : ì¢Œì„ì´ ì˜ˆì•½ë  ë•Œ UI ê°±ì‹ 

```java
public interface TicketEventListener {
    void onUserTurn(); // ì‚¬ìš©ìì˜ ì°¨ë¡€ ì•Œë¦¼
}

public interface SeatBookedListener {
    void onSeatBooked(int row, int col); // ì¢Œì„ ì˜ˆì•½ ì‹œ UI ê°±ì‹ 
}
```

* ì„œë²„ ìŠ¤ë ˆë“œëŠ” ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê³ , UI(MainFrame)ëŠ” ë¦¬ìŠ¤ë„ˆë¥¼ í†µí•´ **Swing EDT ì•ˆì „í•˜ê²Œ UI ì—…ë°ì´íŠ¸**
* UIì™€ ë¡œì§ì„ ë¶„ë¦¬í•˜ì—¬ **ì±…ì„ ë¶„ë¦¬ ë° í™•ì¥ì„± í™•ë³´**

> âœ”ï¸ Observer íŒ¨í„´ì„ í™œìš©í•œ ì´ë²¤íŠ¸ ê¸°ë°˜ êµ¬ì¡°

---

## 5. í…ŒìŠ¤íŠ¸ ì½”ë“œ

* **SeatTest** : ë‹¤ìˆ˜ ìŠ¤ë ˆë“œê°€ ë™ì¼ ì¢Œì„ì„ ë™ì‹œì— ì˜ˆì•½ ì‹œë„ â†’ ë™ì‹œì„± ë¬¸ì œ í™•ì¸
* **TicketQueueTest** : `BlockingQueue`ë¡œ producer-consumer íŒ¨í„´ í…ŒìŠ¤íŠ¸
* **SeatManagerTest** : ë‚¨ì€ ì¢Œì„ ìˆ˜, ì˜ˆì•½ ì„±ê³µ ì—¬ë¶€, ë™ì‹œ ì˜ˆì•½ ì‹œë‚˜ë¦¬ì˜¤ ê²€ì¦

```java
Runnable bookTask = () -> {
    boolean success = seat.book();
    System.out.println(Thread.currentThread().getName() + " ì˜ˆì•½ ì‹œë„ â†’ " + success);
};

for (int i = 0; i < 1000; i++) {
    new Thread(bookTask).start();
}
```

---

## 6. ì„¤ê³„ íŠ¹ì§•

1. **Producer-Consumer íŒ¨í„´**ìœ¼ë¡œ ëŒ€ê¸°ì—´ ê´€ë¦¬
2. **BlockingQueue + synchronized**ë¡œ ë©€í‹°ìŠ¤ë ˆë“œ ì•ˆì „ ë³´ì¥
3. **ê° ì¢Œì„(Seat)ë³„ë¡œ ìµœì†Œ ë‹¨ìœ„ë¡œ ë™ê¸°í™”**í•˜ì—¬ ë™ì‹œ ì˜ˆì•½ ê°€ëŠ¥
4. **ë¦¬ìŠ¤ë„ˆ íŒ¨í„´**ìœ¼ë¡œ UI-ì„œë²„ ë¶„ë¦¬, ì´ë²¤íŠ¸ ê¸°ë°˜ í™”ë©´ ê°±ì‹ 
5. **Swing Timer** ì‚¬ìš© â†’ ëŒ€ê¸°ì—´ ìƒíƒœ/ì¢Œì„ ìƒíƒœ ì‹¤ì‹œê°„ ê°±ì‹ 

---

## 7. ì‚¬ìš© ë°©ë²•

1. í”„ë¡œê·¸ë¨ ì‹¤í–‰ â†’ StartPanelì—ì„œ â€œê²Œì„ ì‹œì‘â€ í´ë¦­
2. Botê³¼ ì‚¬ìš©ìê°€ ëŒ€ê¸°ì—´ì— ë“¤ì–´ê°€ê³  ì„œë²„ ìŠ¤ë ˆë“œê°€ ì°¨ë¡€ëŒ€ë¡œ ì²˜ë¦¬
3. ì‚¬ìš©ìëŠ” ì°¨ë¡€ê°€ ë˜ë©´ ì¢Œì„ ì„ íƒ í™”ë©´ì—ì„œ ì¢Œì„ ì˜ˆì•½ ê°€ëŠ¥
4. ì¢Œì„ ì˜ˆì•½ ì‹œ ìƒë‹¨ StatusPanelì— ë‚¨ì€ ì¢Œì„ ìˆ˜ì™€ ì˜ˆì•½ëœ ì¢Œì„ ìˆ˜ ìë™ ì—…ë°ì´íŠ¸

---

ì œê°€ ì›í•˜ë©´ ì—¬ê¸°ì— **ê° ìŠ¤ë ˆë“œë³„ ì—­í•  ê·¸ë¦¼**ì´ë‚˜ **í”„ë¡œë“€ì„œ-ì»¨ìŠˆë¨¸ íë¦„ë„**ë„ ë„£ì–´ì„œ READMEì— ì‹œê°í™”í•  ìˆ˜ ìˆì–´ìš”.
í˜¹ì‹œ ê·¸ê±°ê¹Œì§€ ë§Œë“¤ì–´ ë“œë¦´ê¹Œìš”?
